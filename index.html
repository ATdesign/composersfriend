<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1">

        <!-- Let Fira Sans do all its magic -->
        <link href="https://fonts.googleapis.com/css?family=Fira+Sans&amp;subset=cyrillic" rel="stylesheet"> 

        <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
        <title>Composer's friend</title>

        <!-- The document -->
        <link href="css/style.css" rel="stylesheet">

        <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
        <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
        <!--[if lt IE 9]>
          <script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
          <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
        <![endif]-->

        <!-- D3.js / TODO: change to production -->
        <script src="js/d3.js"></script>

    </head>
    <body>

        <!-- jQuery -->
        <script src="js/jquery-3.1.1.min.js"></script>

        <!-- Include all compiled plugins (below), or include individual files as needed -->
        <link rel="stylesheet" href="css/uikit.css" />
        <script src="js/uikit.js"></script>

        <!-- Create div containers -->
        <div class="all-container">
            <h2 style="font-family: 'Fira Sans'">Composer's Friend</h2>
            <ul uk-accordion="multiple: true; collapsible: false">
                <li class="uk-open">
                    <h3 class="uk-accordion-title">Circle of Fifths</h3>
                    <div class="uk-accordion-content">
                        <div class="theory" id="theory-container"></div>
                    </div>
                </li>
                <li class="uk-open">
                    <h3 class="uk-accordion-title">Chord Builder</h3>
                    <div class="uk-accordion-content">
                        <div class="chord-builder"></div>
                    </div>
                </li>
                <li class="uk-open">
                    <h3 class="uk-accordion-title">Chord Player</h3>
                    <div class="uk-accordion-content">
                        <div class="chord-player">

                            <ul id="chord-list" class="uk-grid-small uk-child-width-1-3 uk-child-width-1-4@s uk-text-center" uk-sortable="handle: .uk-sortable-handle" uk-grid>
                                
                                <!-- This is only a template *** Remove when no longer needed
                                
                                <li class="chord-list-element" data-root="A#" data-chord="dom7aug5">
                                    <div class="uk-card uk-card-default uk-card-body">
                                        <div class="chord-header">
                                            <span class="uk-sortable-handle" uk-icon="icon: table"></span>
                                            <span class="chord-text">A# dom7aug5</span><br />
                                        </div>
                                        <div class="chord-option chord-length">
                                            <span class="chord-option-label">Length:</span>
                                            <span class="chord-controls chord-reduce-value" uk-icon="icon: minus-circle; ratio:0.8;"></span>
                                            <input type="text" class="chord-text-input" value="1/2" />
                                            <span class="chord-controls chord-add-value" uk-icon="icon: plus-circle; ratio:0.8;"></span>
                                        </div>
                                        <div class="chord-option chord-octave">
                                            <span class="chord-option-label">Octave:</span>
                                            <span class="chord-controls chord-reduce-value" uk-icon="icon: minus-circle; ratio:0.8;"></span>
                                            <input type="text" class="chord-text-input" value="3" />
                                            <span class="chord-controls chord-add-value" uk-icon="icon: plus-circle; ratio:0.8;"></span>
                                        </div>
                                        <div class="chord-option chord-offset">
                                            <span class="chord-option-label">Offset:</span>
                                            <span class="chord-controls chord-reduce-value" uk-icon="icon: minus-circle; ratio:0.8;"></span>
                                            <input type="text" class="chord-text-input" value="0" />
                                            <span class="chord-controls chord-add-value" uk-icon="icon: plus-circle; ratio:0.8;"></span>
                                        </div>
                                    </div>
                                </li>
                                -->
                                
                            </ul>
                        </div>
                    </div>
                </li>
                <li class="uk-open">
                    <h3 class="uk-accordion-title">Keyboard</h3>
                    <div class="uk-accordion-content">
                        <div class="keyboard"></div>
                    </div>
                </li>
                <li class="uk-open">
                    <h3 class="uk-accordion-title">Guitar</h3>
                    <div class="uk-accordion-content">
                        <div class="fretboard fb-guitar"></div>
                    </div>
                </li>
                <li>
                    <h3 class="uk-accordion-title">Bass</h3>
                    <div class="uk-accordion-content">
                        <div class="fretboard-bass fb-bass"></div>
                    </div>
                </li>
            </ul>

        </div>

        <!-- Add Tone.js -->
        <script src="js/Tone.min.js"></script>
        
        <script type="text/javascript">
            var comptools_sound_player = new Tone.PolySynth(4, Tone.Synth).toMaster();
        </script>
        
        <!-- THE test script -->
        <script src="js/composer-tools.js"></script>

        <!-- Create a couple of fretboards ... -->
        <script type="text/javascript">
            my_theory = new comptoolsTheory("theory-container");

            my_chbuild = new comptoolsChordbuilder(".chord-builder");

            st_keyboard = new comptoolsKeyboard(".keyboard", "C1-C5");

            fb_guitar = new comptoolsFretboard(".fb-guitar", "E4B3G3D3A2E2");

            // Options for the bass
            bass_options = {"firstFretWidth": 70,
                "fretboardClass": "fretboard-bass",
                "fretboardNutClass": "fretboard-nut-bass",
                "fretCount": 17};
            fb_bass = new comptoolsFretboard(".fb-bass", "G2D2A1E1", bass_options);

            // Connect all the instruments together
            the_glue = new InstrumentGlue();
            the_glue.objArray.push(st_keyboard);
            the_glue.objArray.push(fb_guitar);
            the_glue.objArray.push(fb_bass);

            st_keyboard.selection_callback = the_glue.funCallback;
            fb_guitar.selection_callback = the_glue.funCallback;
            fb_bass.selection_callback = the_glue.funCallback;

            the_glue.theory = my_theory;
            my_theory.selection_callback = the_glue.funHighlightNotes;

            the_glue.chord_builder = my_chbuild;
            my_chbuild.selection_callback = the_glue.funHighlightChordNotes;

        </script>

    </body>
</html>